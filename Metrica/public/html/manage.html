<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage page</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.js"></script>

    <script src="../jquery-3.2.1.min.js"></script>
    <script src="../jquery.dynatable.js"></script>

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>

    <script type="text/javascript" src="../script/manage.js"></script>
</head>
<body onload="getlogin(); mySites()">
<form>
    <legend>
        <h1>Manage page
            <h4>
                Вы авторизованы как:
                <div id="userLogin"></div>
            </h4>
        </h1>
    </legend>
</form>

<form>
    <h4>Добавить / удалить сайт</h4>
    <input type="text" id="siteurl" placeholder="site url"/>
    <input type="button" id="btnaddsite" value="add site"/>
    <input type="button" id="btndeletesite" value="delete site"/>

    <div class="alert alert-success" id="messageAddSite">
    </div>
</form>

<hr/>

<form>
    <h4>Ваши сайты</h4>
    <table id="mysitetable" border="1">
        <tr>
            <th>URL</th>
        </tr>
    </table>
</form>

<hr/>

<div id="bar-example" style="height: 250px; width: 300px"></div>

<script>
    let json = JSON.stringify({
        url: "qwe.com"
    });

    let xhr = new XMLHttpRequest();
    xhr.open("POST", "http://localhost:3000/api/gotourl/infourls"); // async=true
    xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');
    xhr.send(json);
    xhr.onload = function (e) {
        if (xhr.readyState === 4 && xhr.status === 200) {
            console.log(xhr.responseText + "\t\t\t\t\t\t\wadcccccccccccc");

            let a = JSON.parse(xhr.responseText);
            console.log(a + "\t\t\t\t\t\t\wadcccccc111111111111111111cccccc");
            Morris.Bar({
                element: 'bar-example',
                data: a,
                xkey: 'url',
                ykeys: ['count'],
                labels: ['Count']
            });
            return xhr.responseText;
        }
    };

</script>

</body>
</html>